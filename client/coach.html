<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Public Speaking Coach</title>


  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <style>
    
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #dfe9f3 0%, #ffffff 100%);
      max-width: 900px;
      margin: auto;
      padding: 40px 20px;
      color: #333;
    }

    h1 {
      text-align: center;
      font-weight: 600;
      font-size: 2.2rem;
      color: #2c3e50;
      margin-bottom: 25px;
    }

    
    textarea {
      width: 100%;
      height: 160px;
      padding: 14px;
      font-size: 15px;
      border: 2px solid #ddd;
      border-radius: 12px;
      resize: vertical;
      transition: border 0.3s, box-shadow 0.3s;
    }
    textarea:focus {
      outline: none;
      border-color: #007BFF;
      box-shadow: 0 0 8px rgba(0,123,255,0.2);
    }

    
    button {
      display: block;
      margin: 20px auto;
      padding: 12px 30px;
      font-size: 16px;
      font-weight: 600;
      color: white;
      background: linear-gradient(135deg, #007BFF, #0056b3);
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0, 123, 255, 0.3);
    }

    
    #output {
      margin-top: 25px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    .card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      padding: 20px;
      animation: fadeIn 0.4s ease-in-out;
    }
    .card h3 {
      margin-top: 0;
      color: #007BFF;
    }

    .full {
      grid-column: span 2;
    }

    
    .suggestion {
      background: #fff4d6;
      border-left: 6px solid #ffc107;
      border-radius: 8px;
      padding: 10px;
      margin: 6px 0;
      font-size: 14px;
      animation: slideIn 0.4s ease;
    }

    
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(10px);}
      to {opacity: 1; transform: translateY(0);}
    }
    @keyframes slideIn {
      from {opacity: 0; transform: translateX(-20px);}
      to {opacity: 1; transform: translateX(0);}
    }
  </style>
</head>
<body>
  <h1>üé§ Your Public Speaking Coach</h1>

  
  <textarea id="speechInput" placeholder="Paste your speech text here..."></textarea>
  <button onclick="analyzeSpeech()">‚ú® Analyze My Speech</button>

  
  <div id="output"></div>

  <script>
    
    async function analyzeSpeech() {
      const speech = document.getElementById("speechInput").value.trim();
      if (!speech) {
        alert("‚ö†Ô∏è Please enter your speech text first!");
        return;
      }

      try {
        const response = await fetch("http://127.0.0.1:5000/analyze", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ speech })
        });

        const result = await response.json();
        displayFeedback(result["impact_analysis"] || result["Impact analysis"]);
      } catch (error) {
        document.getElementById("output").innerHTML =
          `<p style="color:red;">‚ùå Error connecting to server: ${error.message}</p>`;
      }
    }

    
    function displayFeedback(feedback) {
      const outputDiv = document.getElementById("output");
      outputDiv.innerHTML = "";

      if (!feedback || feedback.error) {
        outputDiv.innerHTML = `<p style="color:red;">${feedback?.error || "Something went wrong."}</p>`;
        return;
      }

      
      if (feedback.opening) {
        outputDiv.innerHTML += createCard("üé¨ Opening & Hook", feedback.opening);
      }

      // Content feedback
      if (feedback.content) {
        outputDiv.innerHTML += createCard("üìö Content & Structure", feedback.content);
      }

      // Delivery feedback
      if (feedback.delivery) {
        outputDiv.innerHTML += createCard("üéôÔ∏è Delivery & Confidence", feedback.delivery);
      }

      // Grammar corrections (convert to list items)
      if (feedback.grammar) {
        const grammarItems = feedback.grammar
          .split(/-\s+/)
          .filter(item => item.trim())
          .map(item => `<li>${item.trim()}</li>`)
          .join("");
        outputDiv.innerHTML += `
          <div class="card full">
            <h3>‚úçÔ∏è Grammar Corrections</h3>
            <ul style="padding-left:20px; line-height:1.6;">${grammarItems}</ul>
          </div>`;
      }

      // Overall impression
      if (feedback.overall) {
        outputDiv.innerHTML += createCard("üåü Overall Feedback", feedback.overall, true);
      }

      // Suggestions (list of ideas)
      if (feedback.suggestions?.length) {
        const suggestionsHTML = feedback.suggestions
          .map(s => `<div class="suggestion">üí° ${s}</div>`)
          .join("");
        outputDiv.innerHTML += `
          <div class="card full">
            <h3>üí° Suggestions for Improvement</h3>
            ${suggestionsHTML}
          </div>`;
      }
    }

     // Utility function to generate a feedback card.
 
    function createCard(title, content, full = false) {
      return `
        <div class="card ${full ? "full" : ""}">
          <h3>${title}</h3>
          <p>${content}</p>
        </div>`;
    }
  </script>
</body>
</html>
